<!DOCTYPE html>
<html>

<head>
<title>Location</title>
<link rel="stylesheet" type="text/css" href="Style.css">
</head>

<body>

<h1><a href="Homepage.html">Prev</a> Locations <a href="OptimizedPerformance.html">Next</a></h1>

    <div id="floating-panel">
      <input id="start" type="textbox" value="Sydney, NSW">
      <input id="end" type="textbox" value="Sydney, NSW">
      <input id="submit" type="button" value="Geocode">
    </div>
    <div id="map"></div>
    <script>
function initMap() {
console.log("start initMap()");
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 8,
    center: {lat: -34.397, lng: 150.644}
  });
  console.log("map created");
  var geocoder = new google.maps.Geocoder();

  document.getElementById('submit').addEventListener('click', function() {
    geocodeAddress(geocoder, map);
  });
  
}

function geocodeAddress(geocoder, resultsMap) {
  var start = document.getElementById('start').value;

    var end = document.getElementById('end').value;

  geocodeAddressHelper(geocoder, resultsMap, start);
  geocodeAddressHelper(geocoder, resultsMap, end); 
}

function geocodeAddressHelper (geocoder, resultsMap, address) {
geocoder.geocode({'address': address}, function(results, status) {
    if (status === google.maps.GeocoderStatus.OK) {
      resultsMap.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
        map: resultsMap,
        position: results[0].geometry.location
      });
    } else {
      alert('Geocode was not successful for the following reason: ' + status);
    }
  });
  
}




    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQfwzjKLpkeSUq34yjWHxzw8K02ddsRwU&signed_in=true&callback=initMap"
        async defer></script>
  </body>

</html> 